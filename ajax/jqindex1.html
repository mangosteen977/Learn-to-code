<!DOCTYPE html>
<html lang="Ko">
    <head> 
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
        <title> Jquery Ajax 5일차(1) - Jquery Ajax ( 통신 _ XML 파일 로드하기 ) </title>
        <script src="./jquery.js"></script>
        <!-- 
            ajax 통신기본코드 JQ,JS 有
            Jquery ajax : XML, JSON 파일 로드
            jquery 배열 루프 (반복문) : each, 
        -->
        <script>
            $(function(){
                // let $data; //backend데이터를 확장함수로 리턴을 위한 변수
                $.ajax({//ajax 사용 JQ 함수 (고정:혹은 jq엔진에서 변경해야함)

                    url:"jqindex1.xml", //JS = open()과 동일
                    cache:false,//true는 캐시local저장, 갱신(X)(기본설정), false 캐시메모리 저장(X), 자동갱신(O)
                    type:"GET", //GET,POST,PUT,DELETE
                    dataType:"XML", //XML,JOSN,TXT,HTML(파일속성명)
                    /*data:$data=$.fn.abc(), //확장함수로 넘길 수도 있다.*/

                    success:function(s){//success(정상적으로 데이터 load시 작동 됨.)=JS:(status==200)
                        /*
                            (jq_ajax) : response(필요X)
                            (JQ)  : JS:(getElementByTagName) 태그명으로 가져오기
                        */
                        // console.log($(s).find("mname").eq(0).text());
                        // console.log($(s).find("mname:eq(0)").text());
                        let $mname, $likes, $hobby;
                        $(s).find("user").each(function($a,$b){
                            // console.log($a)//$a : 배열, $b: 각 태그
                            $mname = $(this).find("mname").text();
                            $likes = $(this).find("likes").text();
                            $hobby = $(this).find("hobby").text();
                            $("#ulcss>li:eq("+($a+1)+")>span:eq(0)").text($mname);
                            $("#ulcss>li:eq("+($a+1)+")>span:eq(1)").text($likes);
                            $("#ulcss>li:eq("+($a+1)+")>span:eq(2)").text($hobby);
                        });
                    },

                    error:function(){//파일 load실패시 error작동함.
                        alert("통신에러");
                    }
                });
            });
        </script>
        <style>
            *{margin: 0; padding: 0; box-sizing: border-box;}
            ul{list-style: none; width: 500px; height: auto;}
            ul>li{width: 100%; height: 30px; line-height: 30px;}
            ul>li>span{height: 30px; line-height: 30px;
            display: inline-block; text-align: center; font-size: 12px;
            border: 1px solid #ccc; box-sizing: border-box;}
            ul>li>span:nth-last-of-type(1){width: 100px;}
            ul>li>span:nth-last-of-type(2){width: 190px;}
            ul>li>span:nth-last-of-type(3){width: 190px;}
        </style>
    </head>
    <body>
        <p>사용자 정보 리스트</p>
        <ul id="ulcss">
            <li>
                <span>고객명</span>
                <span>좋아하는 과일</span>
                <span>취미</span>
            </li>
            <li>
                <span></span>
                <span></span>
                <span></span>
            </li>
            <li>
                <span></span>
                <span></span>
                <span></span>
            </li>
            <li>
                <span></span>
                <span></span>
                <span></span>
            </li>
            <li>
                <span></span>
                <span></span>
                <span></span>
            </li>
            <li>
                <span></span>
                <span></span>
                <span></span>
            </li>
            <li>
                <span></span>
                <span></span>
                <span></span>
            </li>
            <li>
                <span></span>
                <span></span>
                <span></span>
            </li>
        </ul>
    </body>
</html>
<!-- http://mangsteen977.dothome.co.kr/ajax/jqindex1.html -->
<!-- jndex -->