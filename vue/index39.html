<?php
    $v = date("YmdHis");
?>
<!DOCTYPE html>
<html lang="Ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
        <title> Vue ,vuejs 7ì¼ì°¨ (3) vue + JS + JQ + ajax </title>
        <script src="../jq/jquery.js"></script>
        <script src="http://cdn.jsdelivr.net/npm/vue"></script><!-- vue ë²„ì „ 1.6.4 ???????? -->
        <!-- lodash js src -->
        <Script src="http://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></Script>
        <style>
            *{box-sizing: border-box;}
            span,label{display: block;}
            .m1{width: 500px; height: auto;}
            .m2{width: 100%; height: 40px; margin-bottom: 10px;}
            .m2>select{ width: 30%; height: 40px; text-indent: 5px; border: 1px solid #ccc;}
            .m3{border: 1px solid #ccc;}
            .m3, .m3>ul{width: 100%; height: auto;}
            .m3>ul>li{
                width: 90%; height: 40px; border-bottom: 1px solid #ccc;
                line-height: 40px; font-size: 13px; position: relative;
                text-indent: 5px;
            }
            .m3>ul>li>span{
                display: inline-block; position: absolute; right: 0;
            }
        </style>
        <script>
            function handel(){
                let board = [
                    {subject:"ì¡¸ë ¤ìš”~~~",write:"ì¥ë‚¨í˜",upvotes:1},
                    {subject:"ë‹¤ìŒ ì£¼ ê¸ˆìš”ì¼ ì‹œí—˜... ì•„",write:"ê¹€ì€ì§„",upvotes:71},
                    {subject:"ë‹¤ìŒ ì£¼ í•™ì› ì˜¤í”„ë¼ì¸ ì•ˆë˜ìš”!",write:"ê¹€í•˜ì˜",upvotes:32},
                    {subject:"í•™ì› ê³„ë‹¨ì—ì„œ ìˆ˜ì—…ë“¤ì„ê¹Œìš”?",write:"ê¹€ì£¼ë¦¬",upvotes:94},
                    {subject:"ìŠ¤í¬ë¦½íŠ¸ë‘ ì œì´ì¿¼ë¦¬ë‘ ë·°ë‘ ëª¨ë‘ ì–´ë ¤ì›Œìš”~",write:"ë¯¼ì„œí˜„",upvotes:103},
                    {subject:"ë‹¤ìŒì—” ê¹€ì€ì§„ë‹˜ ì…€ì¹´ë¡œ í•˜ì‹œì£ ",write:"ì¥ë‚¨í˜",upvotes:11}
                ]
                return board;
            }
            $(function(){
               
            })
        </script>
    </head>
    <body>
        <section id="box">
            {{start}}
            <div class="m1">
                <span class="m2">
                    <select v-model="search" v-on:change="sh">
                        <option value="">ì „ì²´ë³´ê¸°</option>
                        <option v-bind:value="wr.write" v-for="wr in free2" >{{wr.write}}</option>
                    </select>
                </span>
                <span class="m3">
                    <ul>
                        <!-- <li v-for="val in arr">{{val.subject}}<span>{{val.upvotes}} ğŸ‘ ({{val.write}})</span></li> -->
                        <li v-for="w in free" v-if="vw && part==1">{{w.subject}} ({{w.vote}})<span>{{w.writer}}</span></li> 
                        <li v-for="w in sfree" v-if="part==2">{{w.subject}} ({{w.vote}})<span>{{w.writer}}</span></li> 
                    </ul>
                </span>
            </div>
        </section>
    </body>
    <script>
        let vues = new Vue({
            el:"#box",
            data:{
                arr:"",
                search:"",
                free:[],
                free2:[],
                sfree:[],
                vw:true,
                part:1
            },
            methods:{
                sh:function(){
                    if(this.search!=""){
                        this.sfree = [];
                        this.vw=false;
                        this.part=2;
                        var j;
                        for(let j in this.arr){
                            if(this.arr[j]["write"]==this.search){   
                                this.sfree.push({
                                    subject:this.arr[j]["subject"],
                                    vote:this.arr[j]["upvotes"],
                                    writer:this.arr[j]["write"]
                                });
                            }
                        }
                    }
                    else{
                        this.vw=true;
                        this.part=1;
                    }
                    // this.arr.filter(function(aa){
                    //     if(aa.write == this.search){
                    //         this.sfree.push({
                    //             writer:aa[0]["write"];
                    //         })
                    //     }
                    // });
                },
                all_list(jdata){
                    //í•„í„° í•¨ìˆ˜
                    // var test = jdata.filter(function(a,b,c){
                    //     return c.indexOf(a) == b;
                    // })
                    // console.log(test)
                    var f;
                    for(f in jdata){
                        this.free.push({
                          subject:jdata[f]["subject"],
                          vote:jdata[f]["upvotes"],
                          writer:jdata[f]["write"]
                        });
                        //ë°°ì—´ ì¤‘ë³µê°’ ì œê±° _.uniqBy
                        this.free2 = _.uniqBy(jdata,"write");
                    }
                }
            },
            components:{

            },
            computed:{
                start:function(){
                    this.arr = handel();
                    this.all_list(this.arr);
                }
            }
        })
    </script>
</html>
<!-- http://mangsteen977.dothome.co.kr/vue/index39.html -->